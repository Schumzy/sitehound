//
//  SiteHound - Easy & powerful website analytics tracking
//
//  Docs: http://www.sitehound.co
//  Source: https://github.com/andyyoung/sitehound
//
//  @author        Andy Young // @andyy // andy@apexa.co.uk
//  @version       0.9.71 - 5th Sep 2016
//  @licence       GNU GPL v3  http://www.gnu.org/licenses/
//
//  Copyright (C) 2016 Andy Young // andy@apexa.co.uk
//  ~~ 500 Startups Distro Team // #500STRONG // 500.co ~~
//
!function(){function e(){var a=window.sitehound=window.sitehound||[],b=k(a.adaptor);b&&(a.silent||l("Waiting for the "+b.klass+" adaptor to load.."),b.ready(function(){var a=window.sitehound||[];new f(a,b)}))}function f(d,e){function s(){f.info("Loaded (version "+a+", adaptor: "+f.adaptor.klass+")"),f.cookieDomain=O(location.hostname),f.debug("Cookie domain: "+f.cookieDomain),o("dnt")&&(f.info("Do-not-track cookie present - disabling."),f.adaptor="disabled"),o("logToConsole")&&(f.logToConsole=!0),window.sitehound=f,window.mixpanel&&window.mixpanel.persistence&&document.cookie.indexOf(window.mixpanel.persistence.name+"=")>-1&&m("Warning: Mixpanel cookie detected - update Mixpanel config to use localStorage."),z(),(d.sniffOnLoad||d.isDone)&&f.sniff()}function t(a){if(f.domainsIgnore.indexOf(a)!=-1)return!0;if(f.domainsIgnoreIPAddress&&/([0-9]{1,3}\.){3}[0-9]{1,3}/.test(a))return!0;for(var b=0;b<f.domainsIgnoreSubdomains.length;b++)if(0==a.indexOf(f.domainsIgnoreSubdomains[b]+"."))return!0;return!1}function u(){f.sniffed=!0,f.page||(f.page=f.detectPage()),f.thisPageTraits["Page Type"]=f.page,v();var a=f.adaptor.userTraits();if(a.createdAt&&(f.globalTraits["Days Since Signup"]=Math.floor((new Date-new Date(a.createdAt))/1e3/60/60/24),f.debug("Days since signup: "+f.globalTraits["Days Since Signup"])),f.userTraits["Email Domain"]?f.userTraits["Email Domain"]=f.userTraits["Email Domain"].match(/[^@]*$/)[0]:(a.Email||a.email||f.userTraits.Email)&&(f.userTraits["Email Domain"]=(a.Email||a.email||f.userTraits.Email).match(/[^@]*$/)[0]),window.FS&&window.FS.getCurrentSessionURL)f.globalTraits["Fullstory URL"]=FS.getCurrentSessionURL();else if(!f.sniffed){var b=window._fs_ready;window._fs_ready=function(){f.adaptor.identify({"Fullstory URL":FS.getCurrentSessionURL()}),"function"==typeof b&&b()}}var c=w(a);if(void 0!==f.overrideReferrer&&(f.thisPageTraits.referrer=f.thisPageTraits.Referrer=f.thisPageTraits.$referrer=f.overrideReferrer),x(),f.trackSessionStart&&(f.track("Session Started"),f.trackSessionStart=!1),f.trackLandingPage&&(f.track("Viewed Landing Page",f.landingPageTraits),f.trackLandingPage=!1),f.page){var d=f.page.split("|",2).map(function(a){return a.trim()});d.push(f.pageTraits);y.apply(f,d)}else f.trackAllPages&&y("Unidentified");for(var g=0;g<c.length;g++)f.track(c[g][0],c[g][1])}function v(){var a=o("firstSeen")||(new Date).toISOString();G("firstSeen",a,366);var b=Math.floor((new Date-new Date(a))/1e3/60/60/24);f.globalTraits["First Seen"]=a,f.globalTraits["Days Since First Seen"]=b,f.debug("Visitor first seen: "+a),f.debug("Days since first seen: "+b);var c=o("sessionStarted")||(new Date).toISOString(),d=o("sessionUpdated")||(new Date).toISOString(),e=Math.floor((new Date-new Date(d))/1e3/60);f.debug("Session started: "+c),f.debug("Minutes since last event: "+e);var g=e>f.sessionTimeout;g&&(f.debug("Session timed out - tracking as new session"),c=(new Date).toISOString());var i=Math.floor((new Date-new Date(c))/1e3/60);f.debug("Session duration: "+i),f.globalTraits["Session Started"]=c,f.globalTraits["Minutes Since Session Start"]=i,G("sessionStarted",c),G("sessionUpdated",(new Date).toISOString());var j=(g?0:parseInt(o("pageViews")||0))+1;f.thisPageTraits["Pageviews This Session"]=j,G("pageViews",j),f.debug("Pageviews: "+j);var m,k=document.referrer.match(/https?:\/\/([^\/]+)(\/.*)/),l=null;if(k&&(l=k[1],m=k[2]),l==location.host&&(f.thisPageTraits["Referrer Type"]=f.detectPage(m)),!g){if(j>1)return;f.debug("Detected landing page")}var n=parseInt(o("sessionCount")||0)+1;if(f.globalTraits["Session Count"]=n,G("sessionCount",n,366),f.debug("Session count: "+n),f.trackSessionStart=g||f.userId,!g){for(var p={},q=["UTM Source","UTM Medium","UTM Campaign","UTM Term","UTM Content","Landing Page","Landing Page Type","Initial Referrer","Initial Referring Domain"],r=0;r<q.length;r++)p[q[r]]=null;var s=H();Object.keys(s).length>0&&(f.debug("utm params:"),f.debug(s),p=h(p,s)),l===location.host?f.trackReferrerLandingPages.indexOf(m)!==-1?(f.debug("Detected known untracked landing page: "+document.referrer),f.trackLandingPage=!0,f.landingPageTraits={path:m,url:document.referrer,$current_url:document.referrer,"Tracked From URL":location.href,referrer:""},p["Landing Page"]=m):document.referrer===location.href?(f.trackLandingPage=!0,p["Landing Page"]=location.pathname):n>1||f.trackDebugWarn("Landing page with local referrer - tracking code not on all pages?"):(f.trackLandingPage=!0,p["Landing Page"]=location.pathname,p["Initial Referrer"]=document.referrer?document.referrer:null,p["Initial Referring Domain"]=l),p["Landing Page"]&&(p["Landing Page Type"]=f.page),p["UTM Source"]||((I(document.URL,"gclid")||I(document.URL,"gclsrc"))&&(p["UTM Source"]="google",p["UTM Medium"]||(p["UTM Medium"]="cpc")),"t.yesware.com"==p["Referring Domain"]&&(p["UTM Source"]="Yesware",p["UTM Medium"]||(p["UTM Medium"]="email")));var t={},u={};for(var v in p)t[v+" [first touch]"]=p[v],u[v+" [last touch]"]=p[v];f.debug("Attribution params:"),f.debug(p),1==n&&(f.debug("..setting first touch params"),f.globalTraits=h(f.globalTraits,J(t))),f.debug("..setting last touch params"),f.globalTraits=h(f.globalTraits,u)}}function w(a){var b=[],c=window.optimizely;if(!c||!c.data)return b;var d=c.data,e=d.state,g=d.sections,h=e.activeExperiments;if(e.redirectExperiment){var i=e.redirectExperiment.experimentId,j=e.activeExperiments.indexOf(i);j===-1&&(h.push(i),f.overrideReferrer=e.redirectExperiment.referrer)}if(!h.length)return b;var k="Optimizely Experiments",l="Optimizely Variations",m=a[k],n=a[l];f.globalTraits[k]=m?"function"==typeof m.sort?m:[m]:[],f.globalTraits[l]=n?"function"==typeof n.sort?n:[n]:[];for(var o=0;o<h.length;o++){var p=h[o],q=e.variationIdsMap[p][0].toString(),r={"Experiment ID":p,"Experiment Name":d.experiments[p].name,"Experiment First View":!m||!m.indexOf||m.indexOf(p)===-1,"Variation ID":q,"Variation Name":e.variationNamesMap[p]};f.globalTraits[k].indexOf(p)===-1&&f.globalTraits[k].push(p);var s=g[p];if(s){r["Section Name"]=s.name,r["Variation ID"]=s.variation_ids.join();for(var t=0;t<s.variation_ids.length;t++)f.globalTraits[l].indexOf(s.variation_ids[t])===-1&&f.globalTraits[l].push(s.variation_ids[t])}else f.globalTraits[l].indexOf(q)===-1&&f.globalTraits[l].push(q);b.push(["Optimizely Experiment Viewed",r])}return f.globalTraits[k].sort(),f.globalTraits[l].sort(),b}function x(){var a=window.mixpanel,b=window.amplitude;if(f.userId){f.debug("doIdentify(): received userId: "+f.userId);var d={},e=["name","firstName","lastName","email","createdAt"];for(var i in f.userTraits){for(var j=i.toLowerCase(),k="",l=0;l<e.length;l++)if(j===e[l].toLowerCase()){k=e[l];break}k||(k="User "+g(i)),d[k]=f.userTraits[i]}var n,m=h(f.globalTraits,d);if(f.adaptor.userId()){if(n=f.adaptor.userId(),f.debug("Current userId: "+n),f.userId!==n){var q;N()&&b.getInstance&&(q=b.getInstance())&&(f.debug("Amplitude: logout"),q.setUserId(null),q.regenerateDeviceId&&q.regenerateDeviceId())}}else if(f.debug("Anonymous session until now"),L()&&(f.debug("analytics.alias("+f.userId+")"),f.adaptor.alias(f.userId,void 0,{integrations:{Mixpanel:!1}})),M()){var p=a.get_distinct_id?a.get_distinct_id():null;p!=f.userId?(f.debug("Mixpanel: $create_alias"),D(),a.register({__alias:f.userId}),a.track("$create_alias",{alias:f.userId,distinct_id:p},function(){f.debug("Mixpanel: $create_alias callback"),E()}),setTimeout(function(){f.debug("Mixpanel: ALIAS_WAIT_TIMEOUT reached"),E()},c)):f.debug("mixpanel.distinct_id == sitehound.userId; no Mixpanel alias call")}f.debug("adaptor.identify("+f.userId+", [traits])"),f.adaptor.identify(f.userId,m),M()&&(f.debug("Mixpanel: set distinct_id"),a.register({distinct_id:f.userId})),(f.userId!==n||o("logged_out"))&&(f.debug("userId != currentUserId - Login"),f.track("Login"),G("logged_out","",-100))}else f.adaptor.identify(f.globalTraits),f.adaptor.userId()&&(M()&&(f.debug("Mixpanel: register({distinct_id: "+f.adaptor.userId()+"})"),a.register({distinct_id:f.adaptor.userId()})),0==f.thisPageTraits["Pageviews This Session"]&&(f.debug("not logged in, but user ID from prior session - setting logged_out cookie"),G("logged_out",!0))),f.detectLogout=void 0===f.detectLogout?void 0!==f.userId:f.detectLogout,f.detectLogout&&!o("logged_out")&&(f.debug("doIdentify(): detecting potential logout.."),f.adaptor.userId()&&(f.track("Logout"),G("logged_out",!0),f.debug("Logout")))}function y(a,b,c){f.debug("Viewed Page: ",[a,b,c]),"object"==typeof c?f.adaptor.page(a,b,f.getTraitsToSend(c)):"object"==typeof b?f.adaptor.page(a,f.getTraitsToSend(b)):b?f.adaptor.page(a,b,f.getTraitsToSend()):f.adaptor.page(a,f.getTraitsToSend())}function z(){C(B(["ready","identify"]))}function A(){C(B())}function B(a){if(f.queue&&f.queue.length){if(!a||!a.length){var b=f.queue;return f.queue=[],b}for(var c=[],d=[],e=0;e<f.queue.length;e++)a.indexOf(f.queue[e][0])!==-1?c.push(f.queue[e]):d.push(f.queue[e]);return f.queue=d,c}}function C(a){for(;a&&a.length>0;){var b=a.shift(),c=b.shift();f[c]&&f[c].apply(f,b)}}function D(){return q?void f.debug("Called pauseAdaptor() but already paused"):(f.debug("pauseAdaptor()"),q={},void["track","identify","page"].map(function(a){q[a]=f.adaptor[a],f.adaptor[a]=function(){f.debug("adding to deferred queue: "+a);var b=Array.prototype.slice.call(arguments);b.unshift(a),r.push(b)}}))}function E(){if(q)for(f.debug("resumeAdaptor()"),["track","identify","page"].map(function(a){f.adaptor[a]=q[a]}),q=null;r&&r.length>0;){var a=r.shift(),b=a.shift();f.adaptor[b]?(f.debug("replaying deferred: "+b),f.adaptor[b].apply(f.adaptor,a)):f.debug("Unrecognised adaptor method: "+b)}}function F(a){f.debug("Detected URL change: "+location.href),f.overrideReferrer=a||document.referrer,f.page=void 0;for(var b=f.detectPage(),c=0;c<p.length;c++)p[c](b);f.sniff()}function G(a,b,c,d){var e="";if(0!=c){var g=new Date;g.setTime(g.getTime()+24*c*60*60*1e3),e="expires="+g.toUTCString()}void 0===d&&(d=f.cookieDomain),document.cookie="sh_"+a+"="+b+"; "+e+";path=/"+(d?";domain="+d:"")}function H(){for(var a="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),b="",c={},d=0;d<a.length;++d)b=I(document.URL,a[d]),b.length&&(c["UTM "+g(a[d].slice(4))]=b);return c}function I(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c),e=d.exec(a);return null===e||e&&"string"!=typeof e[1]&&e[1].length?"":decodeURIComponent(e[1]).replace(/\+/g," ")}function J(a){var b=f.adaptor.userTraits(),c={};if("undefined"==typeof b)return a;for(var d in a)d in b||(c[d]=a[d]);return c}function K(a){f.adaptor=a,b="[SiteHound"+(a&&a.klass?":"+a.klass:"")+"] "}function L(){return"segment"==f.adaptor.klass}function M(){return window.mixpanel&&(!L()||window.analytics.Integrations.Mixpanel)}function N(){return window.amplitude&&L()&&window.analytics.Integrations.Amplitude}function O(a){for(var b=P(a),c=0;c<b.length;++c){var d="__tld__",e="."+b[c];if(G(d,1,0,e),o(d))return G(d,"",-100,e),e}return""}function P(a){var b=a.split("."),c=b[b.length-1],d=[];if(4==b.length&&parseInt(c,10)==c)return d;if(1>=b.length)return d;for(var e=b.length-2;0<=e;--e)d.push(b.slice(e).join("."));return d}var j,n,q,f=this,p=[],r=[];return K(d.adaptor&&(d.adaptor.klass||d.adaptor)!==e.klass?k(d.adaptor):e),"object"!=typeof this.adaptor?void m("adaptor not valid"):(!function(){var b={trackPages:null,page:null,trackAllPages:!1,detectURLChange:!0,detectHashChange:!1,domainsIgnore:["localhost","gtm-msr.appspot.com"],domainsIgnoreIPAddress:!0,domainsIgnoreSubdomains:["staging","test"],trackReferrerLandingPages:[],globalTraits:{},pageTraits:{},thisPageTraits:{},userId:void 0,userTraits:{},detectLogout:void 0,logToConsole:!1,silent:!1,sessionTimeout:30,overrideReferrer:void 0,queue:[],SNIPPET_VERSION:void 0};f.sniffed=!1;for(var c in b)void 0!==d[c]&&(b[c]=d[c]),f[c]=b[c];for(;d.length&&d.pop;)f.queue.unshift(d.pop());f.thisPageTraits["SiteHound library version"]=f.VERSION=a}(),this.sniff=this.done=function(){try{f.info("sniff()"),t(location.hostname)&&(f.info("Ignoring host: "+location.hostname),f.adaptor="disabled"),o("dnt")&&(f.info("Do-not-track cookie present - disabling."),f.adaptor="disabled");var a=!f.sniffed;if(u(),!a)return;A(),!f.detectURLChange&&!f.detectHashChange||j||(n=location.href,j=setInterval(function(){(f.detectHashChange?location.href!==n:location.href.replace(/#.*$/,"")!==n.replace(/#.*$/,""))&&(F(n),n=location.href)},1e3))}catch(a){this.trackError(a)}},this.deferUntilSniff=function(a,b){return!f.sniffed&&(b=Array.prototype.slice.call(b),b.unshift(a),f.queue.push(b),f.debug("(Deferring "+a+"() until sniff)"),!0)},this.identify=function(a,b){f.debug("identify",[a,b]),"object"==typeof b?(f.userId=a,f.globalTraits=h(f.globalTraits,b)):"object"==typeof a?f.globalTraits=h(f.globalTraits,a):f.userId=a,f.sniffed&&x()},this.identifyOnce=function(a){f.deferUntilSniff("identifyOnce",arguments)||(f.debug("identifyOnce",a),f.adaptor.identify(J(a)))},this.detectPage=function(a){void 0===a&&(a=location.pathname);for(var b in f.trackPages){var c=f.trackPages[b];Array.isArray(c)||(c=[c]);for(var d=0;d<c.length;++d){var e=c[d];if("function"==typeof e.test){if(e.test(a))return f.debug("Detected page: "+b),b}else if("."===e[0]){if(a===location.pathname&&document.body.className.match(new RegExp("(?:^|\\s)"+i(e.slice(1))+"(?!\\S)")))return f.debug("Detected page: "+b),b}else if(a.replace(/\/$/,"").match(new RegExp("^"+i(e.replace(/\/$/,"")).replace(/\\\*/g,".*")+"$")))return f.debug("Detected page: "+b),b}}},this.getTraitsToSend=function(a){var b=h(f.globalTraits,f.thisPageTraits);return"object"==typeof a?h(b,a):b},this.info=function(a,b){f.silent||l(a,b)},this.debug=function(a,b){f.logToConsole&&l(a,b)},this.doNotTrack=function(a){a="undefined"==typeof a||!!a,a?G("dnt","1",1e3):G("dnt","",-100),f.debug("doNotTrack",a?"true":"false")},this.debugMode=function(a){f.logToConsole=a="undefined"==typeof a||!!a,a?G("logToConsole","1",1e3):G("logToConsole","",-100),f.debug("debugMode",a?"true":"false")},this.onURLChange=this.onUrlChange=function(a){"function"==typeof a?(this.debug("onURLChange()"),p.push(a)):m("onURLChange() called with something that isn't a function")},this.load=function(a){f.debug("load() called when already loaded"),a&&(K(k(a)),f.info("Updated adaptor to: "+f.adaptor.klass))},this.disable=function(){K(k("disabled")),f.info("Disabled tracking")},void s())}function g(a){return"string"==typeof a?a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):a}function h(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}function i(a){return a.replace(/([\/*.?[\]()\-\|])/g,"\\$1")}function j(a,b){d[a]=b,b.prototype.klass=a}function k(a){var b,c;if("object"==typeof a)c=a;else{b=(a||"segment").toLowerCase()||"segment";try{var c=new d[b]}catch(a){return m("adaptor "+b+" could not be loaded"),void m(a.name+"; "+a.message)}}return c}function l(a,c){if(window.console&&console.log)try{"object"==typeof a?JSON&&JSON.stringify&&(a=b+JSON.stringify(a)):a=b+a,c&&JSON&&JSON.stringify&&(a=a+"("+JSON.stringify(c).slice(1).slice(0,-1)+")",c=null),console.log(a),c&&console.log(c)}catch(a){m(a.name+"; "+a.message)}}function m(a){window.console&&(console.error?console.error(b+a):console.log&&console.log(b+"[ERROR] "+a))}function n(a,b,c){for(var d=c||window,e=a.split("."),f=0;f<e.length;f++){if("undefined"==typeof d[e[f]])return void setTimeout(function(){n(a,b,c)},50);d=d[e[f]]}b()}function o(a,b){void 0===b&&(b="sh_");for(var c=b+a+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(c))return f.substring(c.length,f.length)}return""}var a="0.9.71",b="[SiteHound] ",c=300,d={};f.prototype.push=function(a){var b=a.shift();this[b]?this[b].apply(this,a):this.debug("Unrecognised method: "+b)},f.prototype.alias=function(a,b,c){this.deferUntilSniff("alias",arguments)||(this.debug("alias",[a,b,c]),this.adaptor.alias(a,b,c))},f.prototype.track=function(a,b){function d(a){return a.replace(";","_").replace(":","_")}if(!this.deferUntilSniff("track",arguments)){if(this.debug("track",[a,b]),"object"==typeof b){for(var c in{eventUniqueKey:1,event_unique_key:1,"Event Unique Key":1,"Event unique key":1,"event unique key":1})if(b[c]){c=d(b[c]);var e=d(a)+":"+d(c),f=o("uniqueEvents").split(";");if(f.indexOf(e)!==-1)return void this.debug("already tracked unique event, skipping: "+e);setCookie("uniqueEvents",f.push(e).join(";"));break}b=this.getTraitsToSend(b)}else b=this.getTraitsToSend();this.adaptor.track(a,b)}},f.prototype.trackOnce=function(a,b){if(!this.deferUntilSniff("trackOnce",arguments)){this.debug("trackOnce",[a,b]);var c=this.adaptor.userTraits();if(void 0===c["First "+a]){var d={};d["First "+a]=(new Date).toISOString(),this.adaptor.identify(d),this.track(a,b)}}},f.prototype.trackAndCount=function(a,b){if(!this.deferUntilSniff("trackAndCount",arguments)){this.debug("trackAndCount",[a,b]);var c=this.adaptor.userTraits(),d=1;c&&(d=c[a+" Count"]?parseInt(c[a+" Count"])+1:1);var e={};e["First "+a]=(new Date).toISOString(),this.identifyOnce(e);var f={};f[a+" Count"]=d,f["Last "+a]=(new Date).toISOString(),this.adaptor.identify(f),this.track(a,b)}},f.prototype.trackLink=function(a,b,c){if(!this.deferUntilSniff("trackLink",arguments)){var d={};a&&a.selector&&(d.selector=a.selector),a&&a.length&&(d.length=a.length),this.debug("trackLink",[d,b,c]),this.adaptor.trackLink(a,b,this.getTraitsToSend(c))}},f.prototype.trackForm=function(a,b,c){if(!this.deferUntilSniff("trackForm",arguments)){var d={};a&&a.selector&&(d.selector=a.selector),a&&a.length&&(d.length=a.length),this.debug("trackForm",[d,b,c]),this.adaptor.trackForm(a,b,this.getTraitsToSend(c))}},f.prototype.ready=function(a){if("function"==typeof a){var b=this.detectPage();this.debug("ready("+b+")"),a(b)}else m("ready() called with something that isn't a function")},f.prototype.getUserTraits=function(){return result=h(this.adaptor.userTraits(),this.userTraits),this.debug("getUserTraits() returned ",result),result},f.prototype.trackDebugInfo=function(a){this.trackDebug(a,"info")},f.prototype.trackDebugWarn=function(a){this.trackDebug(a,"warn")},f.prototype.trackDebug=function(a,b){b||(b="info"),this.adaptor.track("Tracking Debug",{message:a,level:b,"SiteHound library version":this.VERSION}),this.debug("["+b+"] "+a)},f.prototype.trackError=function(a){this.adaptor.track("Tracking Error",{name:"object"==typeof a?a.name:"",message:"object"==typeof a?a.message:a,"SiteHound library version":this.VERSION}),m(a.name+"; "+a.message)},j("disabled",function(){this.ready=function(a){a()},this.identify=this.track=this.trackLink=this.trackForm=this.page=this.alias=this.userId=function(){},this.userTraits=function(){return{}}}),j("segment",function(){this.ready=function(a){n("analytics.ready",function(){(window.sitehound&&window.sitehound.logToConsole||o("logToConsole"))&&l("window.analytics detected"),analytics.ready(a)})},this.identify=function(a,b,c){analytics.identify(a,b,c)},this.track=function(a,b){analytics.track(a,b)},this.trackLink=function(a,b,c){analytics.trackLink(a,b,c)},this.trackForm=function(a,b,c){analytics.trackForm(a,b,c)},this.page=function(a,b,c){analytics.page(a,b,c)},this.alias=function(a,b,c){analytics.alias(a,b,c)},this.userId=function(){var a=analytics.user();return a?a.id():void 0},this.userTraits=function(){var a=analytics.user(),b=a.traits();return b||{}}}),e()}();